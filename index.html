<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å—é?</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@300;500;800&display=swap');

        body {
            margin: 0; overflow: hidden;
            background: #0b0c10; color: #c5c6c7;
            font-family: 'Exo 2', sans-serif; user-select: none;
            cursor: default;
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 1; }

        header { position: absolute; top: 15px; width: 100%; text-align: center; z-index: 100; }
        h1 { font-size: 2.5rem; color: #66fcf1; text-shadow: 0 0 15px rgba(102, 252, 241, 0.6); margin: 0; }

        /* –ü–æ–¥—Å–∫–∞–∑–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        #space-prompt {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            font-size: 1.2rem; font-weight: 800; color: #45a29e;
            background: rgba(11, 12, 16, 0.9); padding: 12px 30px; border-radius: 30px;
            border: 2px solid #45a29e; z-index: 100; transition: 0.3s;
            box-shadow: 0 0 15px rgba(69, 162, 158, 0.3);
            display: none;
        }
        .pulse { animation: pulse 1.5s infinite; }
        @keyframes pulse { 50% { opacity: 0.5; } }

        /* –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã */
        #cosmic-object {
            position: absolute; top: -500px; left: 50%; transform: translateX(-50%);
            width: 300px; height: 300px; z-index: 5;
            transition: top 2.5s cubic-bezier(0.25, 1, 0.5, 1);
            filter: drop-shadow(0 0 30px rgba(102, 252, 241, 0.2));
        }

        #ship {
            position: absolute; bottom: 15%; left: 50%; transform: translate(-50%, 0);
            width: 90px; height: 130px; z-index: 50;
            transition: all 3s cubic-bezier(0.25, 1, 0.5, 1);
            filter: drop-shadow(0 0 15px rgba(102, 252, 241, 0.4));
        }

        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
        #info-panel {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 850px; max-width: 90%; max-height: 85vh; overflow-y: auto;
            background: rgba(11, 12, 16, 0.95);
            border-left: 5px solid #66fcf1; border-right: 5px solid #66fcf1;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            border-radius: 15px; padding: 40px;
            z-index: 60; opacity: 0; pointer-events: none;
            transition: all 0.5s ease; backdrop-filter: blur(10px);
        }
        #info-panel.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: all; }
        
        h2 { color: #66fcf1; font-size: 2rem; margin-top: 0; text-align: center; }
        h3 { color: #45a29e; border-bottom: 1px solid #1f2833; padding-bottom: 5px; margin-top: 20px; }
        p, li { font-size: 1.15rem; line-height: 1.5; color: #e0e0e0; }

        /* --- –í–°–ü–õ–´–í–ê–Æ–©–ò–ï –ü–û–†–¢–†–ï–¢–´ –ò –ü–û–î–°–ö–ê–ó–ö–ò --- */
        .hover-name {
            color: #ffb74d; border-bottom: 1px dashed #ffb74d; cursor: help; position: relative; font-weight: bold;
        }
        .hover-term {
            color: #66fcf1; border-bottom: 1px dashed #66fcf1; cursor: help; position: relative; font-weight: bold;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç—É–ª—Ç–∏–ø–∞ */
        .tooltip-box {
            position: absolute; bottom: 120%; left: 50%; transform: translateX(-50%);
            width: 200px; background: #0b0c10; border: 2px solid #45a29e;
            border-radius: 10px; padding: 10px; opacity: 0; visibility: hidden;
            transition: 0.3s; z-index: 200; pointer-events: none; box-shadow: 0 0 20px rgba(0,0,0,0.8);
            text-align: center;
        }
        .hover-name:hover .tooltip-box, .hover-term:hover .tooltip-box {
            opacity: 1; visibility: visible; bottom: 110%;
        }
        .tooltip-img { width: 100%; height: auto; border-radius: 5px; margin-bottom: 5px; }
        .tooltip-text { font-size: 0.9rem; color: #fff; }

        /* –ö–í–ò–ó–´ */
        .quiz-btn {
            display: block; width: 100%; background: #1f2833; color: #66fcf1;
            border: 2px solid #45a29e; border-radius: 8px;
            padding: 15px; font-size: 1.2rem; margin-bottom: 10px;
            cursor: pointer; transition: 0.3s; font-family: 'Exo 2', sans-serif; font-weight: bold;
        }
        .quiz-btn:hover { background: #45a29e; color: #0b0c10; transform: scale(1.02); }
        .quiz-btn.correct { background: #4caf50 !important; color: white !important; border-color: #4caf50; }
        .quiz-btn.wrong { background: #f44336 !important; color: white !important; border-color: #f44336; }

        /* –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ */
        .interactive-btn {
            background: #45a29e; color: #0b0c10; border: none; padding: 10px 20px;
            font-size: 1.1rem; font-weight: bold; border-radius: 10px; cursor: pointer;
            transition: 0.3s; box-shadow: 0 5px 15px rgba(69, 162, 158, 0.3);
        }
        .interactive-btn:hover { background: #66fcf1; transform: translateY(-3px); }

        .hotel-container { overflow: hidden; width: 100%; position: relative; margin: 15px 0; }
        .hotel { display: flex; gap: 15px; transition: transform 0.5s ease; padding: 10px; }
        .room {
            min-width: 80px; height: 80px; background: #1f2833; border: 3px solid #66fcf1;
            border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 1.5rem; position: relative; box-shadow: inset 0 0 10px #0b0c10;
        }
        .room-num { font-size: 0.8rem; color: #45a29e; position: absolute; top: 5px; }
        .guest { font-size: 2.5rem; transition: 0.5s; }

        .infinity-sim { display: flex; gap: 20px; margin-top: 15px; }
        .sim-box { flex: 1; background: #1f2833; padding: 15px; border-radius: 10px; text-align: center; border: 2px solid #45a29e; }
        .sim-display { font-size: 2rem; color: #66fcf1; font-weight: bold; margin: 10px 0; height: 40px;}
        input[type=range] { width: 80%; cursor: pointer; }

        /* –ß–ï–†–ù–ê–Ø –î–´–†–ê */
        #black-hole {
            position: absolute; top: -600px; left: 50%; transform: translateX(-50%) scale(0.1);
            width: 600px; height: 600px; border-radius: 50%;
            background: radial-gradient(circle, #000000 30%, #1a052e 50%, transparent 100%);
            box-shadow: inset 0 0 80px #000, 0 0 120px rgba(102, 252, 241, 0.5);
            z-index: 45; transition: top 3s cubic-bezier(0.25, 1, 0.5, 1), transform 3s ease-in;
            animation: spin 10s linear infinite;
            display: none;
        }
        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        #black-hole.active { top: 50%; transform: translate(-50%, -50%) scale(1.5); }

        #credits {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 200;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 2s;
        }
        #credits h1 { font-size: 5rem; color: #66fcf1; text-shadow: 0 0 20px #45a29e; }
        #credits p { font-size: 2.5rem; color: #45a29e; }
    </style>
</head>
<body>

    <header><h1>–ß–¢–û –°–ö–†–´–í–ê–ï–¢–°–Ø –ó–ê –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨–Æ?</h1></header>

    <canvas id="starfield"></canvas>
    <div id="cosmic-object"></div>
    <div id="black-hole"></div>

    <div id="ship">
        <svg viewBox="0 0 100 150">
            <path d="M 40 120 Q 50 150 60 120" fill="#45a29e" filter="blur(3px)"/>
            <path d="M 50 10 L 80 100 L 50 120 L 20 100 Z" fill="#e0e0e0"/>
            <path d="M 50 30 Q 65 60 50 80 Q 35 60 50 30" fill="#66fcf1"/>
            <path d="M 20 100 L 5 120 L 30 110 Z" fill="#45a29e"/>
            <path d="M 80 100 L 95 120 L 70 110 Z" fill="#45a29e"/>
        </svg>
    </div>

    <div id="info-panel">
        <h2 id="info-title"></h2>
        <div id="info-text"></div>
    </div>

    <div id="space-prompt" class="pulse">–ù–ê–ñ–ú–ò–¢–ï –ü–†–û–ë–ï–õ –ò–õ–ò –ö–õ–ò–ö–ù–ò–¢–ï</div>

    <div id="credits">
        <h1>–ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨</h1>
        <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª 10 –∫–ª–∞—Å—Å</p>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï (–° –ü–û–†–¢–†–ï–¢–ê–ú–ò –ò –¢–£–õ–¢–ò–ü–ê–ú–ò) ---
        const content = [
            {
                type: 'info', planet: 'üåç', color: '#45a29e',
                title: '1Ô∏è‚É£ –ü–æ–Ω—è—Ç–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏',
                text: `<p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É —á–µ–≥–æ-—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ü–∞. –≠—Ç–æ –Ω–µ —á–∏—Å–ª–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–æ–µ —á–∏—Å–ª–æ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ 1, –∞ —É –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ –Ω–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —à–∞–≥–∞.</p>
                       <p><b>–ü—Ä–∏–º–µ—Ä—ã:</b></p>
                       <ul><li>—Ä—è–¥ —á–∏—Å–µ–ª: 1, 2, 3... ‚Äî –µ–≥–æ –Ω–µ–ª—å–∑—è –∑–∞–∫–æ–Ω—á–∏—Ç—å;</li><li>–ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è ‚Äî —É –Ω–µ—ë –Ω–µ—Ç –Ω–∏ –Ω–∞—á–∞–ª–∞, –Ω–∏ –∫–æ–Ω—Ü–∞;</li><li>–¥–µ–ª–µ–Ω–∏–µ: —á–∏—Å–ª–æ –º–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.</li></ul>
                       <p>–î–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–Ω–∞–∫ ‚àû.</p>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#66fcf1',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 1: –°—É—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏',
                text: `<p>–Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –æ–±—ã—á–Ω—ã–º —á–∏—Å–ª–æ–º?</p>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–î–∞, —ç—Ç–æ —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ –≤–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π</button>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–ù–µ—Ç, —ç—Ç–æ –ø–æ–Ω—è—Ç–∏–µ/–∏–¥–µ—è</button>`
            },
            {
                type: 'info', planet: 'ü™ê', color: '#ffb74d',
                title: '2Ô∏è‚É£ –ò—Å—Ç–æ—Ä–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏',
                text: `<h3>üèõ –î—Ä–µ–≤–Ω—è—è –ì—Ä–µ—Ü–∏—è</h3><p>
                       <span class="hover-name">–ê—Ä–∏—Å—Ç–æ—Ç–µ–ª—å<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Aristotle_Altemps_Inv8575.jpg/440px-Aristotle_Altemps_Inv8575.jpg" class="tooltip-img"><div class="tooltip-text">384‚Äì322 –¥–æ –Ω. —ç.</div></span></span> 
                       —Å—á–∏—Ç–∞–ª, —á—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å. 
                       <span class="hover-name">–ó–µ–Ω–æ–Ω –≠–ª–µ–π—Å–∫–∏–π<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Zeno_of_Elea_Tibaldi_or_Carducho.jpg/440px-Zeno_of_Elea_Tibaldi_or_Carducho.jpg" class="tooltip-img"><div class="tooltip-text">–æ–∫. 490‚Äì430 –¥–æ –Ω. —ç.</div></span></span> 
                       –ø—Ä–∏–¥—É–º–∞–ª –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã (–ø—Ä–æ –ê—Ö–∏–ª–ª–µ—Å–∞ –∏ —á–µ—Ä–µ–ø–∞—Ö—É).</p>
                       <h3>üìê XVII –≤–µ–∫</h3><p>
                       <span class="hover-name">–î–∂–æ–Ω –í–∞–ª–ª–∏—Å<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/John_Wallis_by_Sir_Godfrey_Kneller%2C_Bt.jpg/440px-John_Wallis_by_Sir_Godfrey_Kneller%2C_Bt.jpg" class="tooltip-img"><div class="tooltip-text">1616‚Äì1703</div></span></span> 
                       –≤–ø–µ—Ä–≤—ã–µ –≤–≤—ë–ª –∑–Ω–∞–∫ ‚àû.</p>
                       <h3>üìä XIX –≤–µ–∫</h3><p>
                       <span class="hover-name">–ì–µ–æ—Ä–≥ –ö–∞–Ω—Ç–æ—Ä<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Georg_Cantor2.jpg" class="tooltip-img"><div class="tooltip-text">1845‚Äì1918</div></span></span> 
                       –¥–æ–∫–∞–∑–∞–ª, —á—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π –±—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–æ–≤.</p>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#e0e0e0',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 2: –ò—Å—Ç–æ—Ä–∏—è',
                text: `<p>–ö—Ç–æ –≤–ø–µ—Ä–≤—ã–µ –≤–≤–µ–ª –∑–Ω–∞–∫ ‚àû (–ª–µ–∂–∞—â—É—é –≤–æ—Å—å–º–µ—Ä–∫—É)?</p>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–î–∂–æ–Ω –í–∞–ª–ª–∏—Å</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ì–µ–æ—Ä–≥ –ö–∞–Ω—Ç–æ—Ä</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ó–µ–Ω–æ–Ω –≠–ª–µ–π—Å–∫–∏–π</button>`
            },
            {
                type: 'info', planet: 'üåå', color: '#66fcf1',
                title: '3Ô∏è‚É£ –í–∏–¥—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π',
                text: `<p><b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è</b> ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å (–∫–∞–∫ —Å—á–µ—Ç). <b>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</b> ‚Äî –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç (–∫–∞–∫ –≤—Å–µ —á–∏—Å–ª–∞ —Å—Ä–∞–∑—É).</p>
                       <div class="infinity-sim">
                           <div class="sim-box">
                               <p><b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è</b></p>
                               <div class="sim-display" id="pot-count">0</div>
                               <button class="interactive-btn" onclick="addPotential()">–°—á–∏—Ç–∞—Ç—å +1</button>
                           </div>
                           <div class="sim-box">
                               <p><b>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</b></p>
                               <div class="sim-display" id="act-show">?</div>
                               <button class="interactive-btn" onclick="document.getElementById('act-show').innerText = '{1, 2, 3... ‚àû}'">–£–≤–∏–¥–µ—Ç—å –≤—Å—ë</button>
                           </div>
                       </div>
                       <hr style="border-color: #45a29e;">
                       <p><b>üî¢ –°—á—ë—Ç–Ω–∞—è:</b> –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –ø–æ –ø–æ—Ä—è–¥–∫—É. –ü—Ä–∏–º–µ—Ä—ã: –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞, —ç—Ç–∞–∂–∏ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º –¥–æ–º–µ.</p>
                       <p><b>üåä –ù–µ—Å—á—ë—Ç–Ω–∞—è:</b> –ï—ë –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞—Ç—å. –ü—Ä–∏–º–µ—Ä—ã: –≤—Å–µ —Ç–æ—á–∫–∏ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ.</p>
                       <div class="sim-box" style="margin-top: 15px;">
                           <p style="margin-top:0;"><b>–õ—É–ø–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏:</b> –£–≤–µ–ª–∏—á—å –æ—Ç—Ä–µ–∑–æ–∫ –º–µ–∂–¥—É 0 –∏ 1.</p>
                           <input type="range" min="1" max="10" value="1" oninput="document.getElementById('zoom-res').innerText = '0.' + '0'.repeat(this.value) + '1... –∏ –µ—â–µ ‚àû —á–∏—Å–µ–ª'">
                           <div id="zoom-res" style="font-size: 1.5rem; color: #66fcf1; font-weight: bold; margin-top: 5px;">0.1...</div>
                       </div>`
            },
            {
                type: 'info', planet: 'üöÄ', color: '#45a29e',
                title: '4Ô∏è‚É£ –¢–µ–æ—Ä–∏–∏ –∏ –ü–∞—Ä–∞–¥–æ–∫—Å—ã',
                text: `<h3>üè® –ü–∞—Ä–∞–¥–æ–∫—Å –æ—Ç–µ–ª—è –ì–∏–ª—å–±–µ—Ä—Ç–∞</h3>
                       <p>–í –æ—Ç–µ–ª–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –º–Ω–æ–≥–æ –∫–æ–º–Ω–∞—Ç, –∏ –≤—Å–µ –æ–Ω–∏ –∑–∞–Ω—è—Ç—ã. –ù–æ –µ—Å–ª–∏ –ø—Ä–∏–¥—ë—Ç –Ω–æ–≤—ã–π –≥–æ—Å—Ç—å: –∫–∞–∂–¥—ã–π –ø–µ—Ä–µ–µ–∑–∂–∞–µ—Ç –≤ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–Ω–∞—Ç—É (–∏–∑ 1 –≤–æ 2, –∏–∑ 2 –≤ 3...), –∏ –ø–µ—Ä–≤–∞—è –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è.</p>
                       <div class="hotel-container">
                           <div class="hotel" id="hotel-track">
                               <div class="room"><span class="room-num">1</span><span class="guest">üê±</span></div>
                               <div class="room"><span class="room-num">2</span><span class="guest">üê∂</span></div>
                               <div class="room"><span class="room-num">3</span><span class="guest">ü¶ä</span></div>
                               <div class="room"><span class="room-num">4</span><span class="guest">üêº</span></div>
                               <div class="room" style="font-size: 2rem; color: #66fcf1; background: transparent; border:none;">...‚àû</div>
                           </div>
                       </div>
                       <button class="interactive-btn" style="margin: 0 auto; display: block;" onclick="addGuest()">–ó–∞—Å–µ–ª–∏—Ç—å –Ω–æ–≤–æ–≥–æ –≥–æ—Å—Ç—è!</button>
                       
                       <h3>üê¢ –ü–∞—Ä–∞–¥–æ–∫—Å –ê—Ö–∏–ª–ª–µ—Å–∞ –∏ —á–µ—Ä–µ–ø–∞—Ö–∏</h3>
                       <p>–ê—Ö–∏–ª–ª–µ—Å –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –ø–æ–∫–∞ –æ–Ω –¥–æ–±–µ–≥–∞–µ—Ç –¥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –±—ã–ª–∞ —á–µ—Ä–µ–ø–∞—Ö–∞, –æ–Ω–∞ —á—É—Ç—å –æ—Ç–ø–æ–ª–∑–∞–µ—Ç. –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∏—Ç—Å—è, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω—É–ª–µ–º.</p>
                       <div style="background: #1f2833; height: 50px; position: relative; border-radius: 25px; margin: 15px 0; overflow: hidden; border: 2px solid #45a29e;">
                           <span id="ach" style="position: absolute; font-size: 30px; left: 0%; top: 5px; transition: 0.5s;">üèÉ</span>
                           <span id="tur" style="position: absolute; font-size: 30px; left: 50%; top: 5px; transition: 0.5s;">üê¢</span>
                       </div>
                       <button class="interactive-btn" style="margin: 0 auto; display: block;" onclick="stepAchilles()">–°–æ–∫—Ä–∞—Ç–∏—Ç—å –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –≤–¥–≤–æ–µ!</button>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#ffb74d',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 3: –ü–∞—Ä–∞–¥–æ–∫—Å—ã',
                text: `<p>–ú–æ–∂–µ—Ç –ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –æ—Ç–µ–ª—å, –≤ –∫–æ—Ç–æ—Ä–æ–º –í–°–ï –∫–æ–º–Ω–∞—Ç—ã –∑–∞–Ω—è—Ç—ã, –ø—Ä–∏–Ω—è—Ç—å –µ—â–µ –≥–æ—Å—Ç–µ–π?</p>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ù–µ—Ç, –º–µ—Å—Ç –∂–µ –Ω–µ—Ç</button>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–î–∞, –µ—Å–ª–∏ –≤—Å–µ –ø–æ–¥–≤–∏–Ω—É—Ç—Å—è</button>`
            },
            {
                type: 'info', planet: 'üõ∞Ô∏è', color: '#66fcf1',
                title: '5Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∏—Ä–µ',
                text: `<h3>üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h3><p>–ü—Ä–µ–¥–µ–ª—ã –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–µ–æ—Ä–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤.</p>
                       <h3>üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</h3><p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã, –∞–ª–≥–æ—Ä–∏—Ç–º—ã –±–µ–∑ –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ü–∞.</p>
                       <h3>‚öõ –§–∏–∑–∏–∫–∞ –∏ üåå –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è</h3>
                       <p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ –º–∞–ª—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã, –≤–æ–∑–º–æ–∂–Ω–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –í—Å–µ–ª–µ–Ω–Ω–æ–π, –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è.</p>
                       <div class="sim-box" style="margin-top: 15px; border-color: #66fcf1;">
                           <p style="margin-top:0;"><b>–°–∏–º—É–ª—è—Ç–æ—Ä –ß–µ—Ä–Ω–æ–π –¥—ã—Ä—ã:</b> –°–∂–∏–º–∞–π –∑–≤–µ–∑–¥—É!</p>
                           <input type="range" min="1" max="100" value="1" oninput="document.getElementById('density').innerText = this.value === '100' ? '–ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨ ‚àû' : this.value * 1000 + ' —Ç–æ–Ω–Ω/—Å–º¬≥'">
                           <div id="density" style="font-size: 1.5rem; color: #66fcf1; font-weight: bold; margin-top: 5px;">1000 —Ç–æ–Ω–Ω/—Å–º¬≥</div>
                       </div>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#45a29e',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 4: –§–∏–∑–∏–∫–∞',
                text: `<p>–ì–¥–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ñ–∏–∑–∏–∫–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏?</p>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–í —á—ë—Ä–Ω—ã—Ö –¥—ã—Ä–∞—Ö</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–í —Ü–µ–Ω—Ç—Ä–µ –°–æ–ª–Ω—Ü–∞</button>`
            },
            {
                type: 'info', planet: 'üìö', color: '#45a29e',
                title: '6Ô∏è‚É£ –®–∫–æ–ª–∞ –∏ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ',
                text: `<p><b>–ì–¥–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —à–∫–æ–ª–µ:</b></p>
                       <ul>
                           <li>—Å—á—ë—Ç —á–∏—Å–µ–ª –∏ –ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è;</li>
                           <li>–¥—Ä–æ–±–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π;</li>
                           <li><span class="hover-term">–ø—Ä–µ–¥–µ–ª—ã<span class="tooltip-box" style="width: 250px;"><div class="tooltip-text">–ß–∏—Å–ª–æ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã –ø–æ–¥—Ö–æ–¥–∏–º –≤—Å—ë –±–ª–∏–∂–µ.<br>–ü—Ä–∏–º–µ—Ä: 2.9 -> 3</div></span></span> (–≤ —Å—Ç–∞—Ä—à–∏—Ö –∫–ª–∞—Å—Å–∞—Ö).</li>
                       </ul>
                       <h3 style="color: #66fcf1; font-size: 1.5rem;">üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ</h3>
                       <p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –º–µ–Ω—è–µ—Ç –Ω–∞—à–µ –º—ã—à–ª–µ–Ω–∏–µ, –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–∞—É–∫–µ, —Ç–µ—Ö–Ω–∏–∫–µ –∏ –∫–æ—Å–º–æ—Å–µ.</p>`
            }
        ];

        // --- –ö–ê–ù–í–ê–° –ö–û–°–ú–û–° ---
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        const stars = [];
        for (let i = 0; i < 500; i++) stars.push({ x: Math.random() * width, y: Math.random() * height, z: Math.random() * 2 + 0.5 });

        let speedMultiplier = 1;
        let cosmicStopped = false;

        function drawStars() {
            ctx.fillStyle = '#0b0c10'; ctx.fillRect(0, 0, width, height); ctx.fillStyle = '#c5c6c7';
            for (let star of stars) {
                ctx.beginPath(); ctx.arc(star.x, star.y, star.z, 0, Math.PI * 2); ctx.fill();
                if (!cosmicStopped) { star.y += star.z * speedMultiplier; if (star.y > height) star.y = 0; }
            }
            requestAnimationFrame(drawStars);
        }
        drawStars();
        window.addEventListener('resize', () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; });

        // --- –õ–û–ì–ò–ö–ê ---
        let state = -1;
        let isMoving = false;
        let quizActive = false;

        const panel = document.getElementById('info-panel');
        const prompt = document.getElementById('space-prompt');
        const ship = document.getElementById('ship');
        const cosmicObject = document.getElementById('cosmic-object');

        function setPlanet(emoji, color) {
            cosmicObject.innerHTML = `<svg viewBox="0 0 100 100" style="filter: drop-shadow(0 0 40px ${color});"><circle cx="50" cy="50" r="48" fill="${color}" fill-opacity="0.2" stroke="${color}" stroke-width="2"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" font-size="60">${emoji}</text></svg>`;
        }

        // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–õ–ê–í–ò–ê–¢–£–†–´
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                tryAdvance();
            }
        });

        // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–õ–ò–ö–ê (–î–õ–Ø –¢–ï–õ–ï–§–û–ù–û–í)
        document.addEventListener('click', (e) => {
            // –ï—Å–ª–∏ –∫–ª–∏–∫ –±—ã–ª –ø–æ –∫–Ω–æ–ø–∫–µ –∏–ª–∏ –∏–Ω–ø—É—Ç—É - –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–ª–∞–π–¥
            if (e.target.closest('button') || e.target.closest('input')) return;
            tryAdvance();
        });

        function tryAdvance() {
            if (!isMoving && !quizActive && state === -1) {
                advance();
            } else if (!isMoving && !quizActive && content[state].type !== 'quiz') {
                advance();
            }
        }

        prompt.style.display = 'block';

        function advance() {
            isMoving = true;
            panel.classList.remove('visible');
            prompt.style.display = 'none';
            speedMultiplier = 20; // –ë—ã—Å—Ç—Ä—ã–π –ø–æ–ª–µ—Ç

            state++;

            if (state >= content.length) { finalAnimation(); return; }

            cosmicObject.style.top = '120vh'; 

            quizActive = content[state].type === 'quiz';

            setTimeout(() => {
                setPlanet(content[state].planet, content[state].color);
                cosmicObject.style.transition = 'none';
                cosmicObject.style.top = '-300px';

                setTimeout(() => {
                    cosmicObject.style.transition = 'top 2.5s cubic-bezier(0.25, 1, 0.5, 1)';
                    cosmicObject.style.top = '20%';

                    setTimeout(() => {
                        speedMultiplier = 1; 
                        document.getElementById('info-title').innerText = content[state].title;
                        document.getElementById('info-text').innerHTML = content[state].text;
                        panel.classList.add('visible');
                        
                        if (!quizActive) {
                            prompt.innerText = "–ü–†–û–ë–ï–õ –ò–õ–ò –ö–õ–ò–ö ‚Äî –õ–ï–¢–ï–¢–¨ –î–ê–õ–¨–®–ï";
                            prompt.style.display = 'block';
                        }
                        isMoving = false;
                        if (content[state].title.includes("–ü–∞—Ä–∞–¥–æ–∫—Å—ã")) resetAchilles();
                    }, 2000);
                }, 100);
            }, 1000);
        }

        // --- –ö–í–ò–ó–´ ---
        window.checkAnswer = function(btn, isCorrect) {
            const allBtns = btn.parentElement.querySelectorAll('.quiz-btn');
            allBtns.forEach(b => b.disabled = true);

            if (isCorrect) {
                btn.classList.add('correct');
                btn.innerText += " ‚úÖ –í–ï–†–ù–û!";
            } else {
                btn.classList.add('wrong');
                btn.innerText += " ‚ùå –û–®–ò–ë–ö–ê";
                allBtns.forEach(b => { if(b.dataset.correct === "true") b.classList.add('correct'); });
            }

            setTimeout(() => { quizActive = false; advance(); }, 1500);
        };

        // --- –ò–ù–¢–ï–†–ê–ö–¢–ò–í ---
        let potCount = 0;
        window.addPotential = function() {
            potCount++; document.getElementById('pot-count').innerText = potCount;
        }

        const newGuests = ['üëΩ', 'ü§ñ', 'üëª', 'ü¶Ñ', 'ü¶ñ', 'üéÉ'];
        let guestIndex = 0;
        window.addGuest = function() {
            const track = document.getElementById('hotel-track');
            track.style.transform = 'translateX(95px)';
            setTimeout(() => {
                track.style.transition = 'none'; track.style.transform = 'translateX(0)';
                const newEmoji = newGuests[guestIndex % newGuests.length];
                guestIndex++;
                track.insertAdjacentHTML('afterbegin', `<div class="room"><span class="room-num">1</span><span class="guest">${newEmoji}</span></div>`);
                if (track.children.length > 5) track.removeChild(track.children[4]);
                Array.from(track.children).forEach((room, idx) => room.querySelector('.room-num').innerText = idx + 1);
                setTimeout(() => track.style.transition = 'transform 0.5s ease', 50);
            }, 500);
        };

        let achPos = 0, turPos = 50;
        function resetAchilles() { achPos = 0; turPos = 50; }
        window.stepAchilles = function() {
            achPos = achPos + (turPos - achPos) / 2;
            turPos += 1; 
            document.getElementById('ach').style.left = achPos + '%';
            document.getElementById('tur').style.left = turPos + '%';
        };

        // --- –§–ò–ù–ê–õ: –ü–û–õ–ï–¢ -> –ó–ê–ú–ï–î–õ–ï–ù–ò–ï -> –ü–û–Ø–í–õ–ï–ù–ò–ï –î–´–†–´ -> –í–õ–ï–¢–ê–ù–ò–ï ---
        function finalAnimation() {
            prompt.style.display = 'none';
            cosmicObject.style.display = 'none';
            
            // 1. –ë–´–°–¢–†–´–ô –ü–û–õ–ï–¢ (2.5 —Å–µ–∫)
            speedMultiplier = 25; 

            setTimeout(() => {
                // 2. –ó–ê–ú–ï–î–õ–ï–ù–ò–ï –ü–ï–†–ï–î –î–´–†–û–ô
                let slowDownInterval = setInterval(() => {
                    if(speedMultiplier > 2) speedMultiplier -= 1;
                    else clearInterval(slowDownInterval);
                }, 50);

                // –î–´–†–ê –ú–ï–î–õ–ï–ù–ù–û –°–ü–£–°–ö–ê–ï–¢–°–Ø
                const bh = document.getElementById('black-hole');
                bh.style.display = 'block'; 
                bh.style.transition = 'top 4s ease-out, transform 4s ease-out';
                
                setTimeout(() => bh.classList.add('active'), 100); 

                // 3. –ö–û–†–ê–ë–õ–¨ –£–°–ö–û–†–Ø–ï–¢–°–Ø –í –î–´–†–£
                setTimeout(() => {
                    speedMultiplier = 40; // –≠—Ñ—Ñ–µ–∫—Ç –∑–∞—Ç—è–≥–∏–≤–∞–Ω–∏—è (–∑–≤–µ–∑–¥—ã —Å–Ω–æ–≤–∞ –±—ã—Å—Ç—Ä–æ)
                    cosmicStopped = false; 
                    
                    ship.style.transition = 'all 2.5s ease-in';
                    ship.style.bottom = '50%';
                    ship.style.transform = 'translate(-50%, 50%) rotate(720deg) scale(0)';
                    ship.style.filter = 'brightness(0)';

                    // 4. –¢–ò–¢–†–´
                    setTimeout(() => {
                        cosmicStopped = true; // –¢–µ–ø–µ—Ä—å –ø–æ–ª–Ω–∞—è —Ç—å–º–∞
                        document.getElementById('credits').style.opacity = '1';

                        // 5. –í–´–õ–ï–¢ –û–ë–†–ê–¢–ù–û
                        setTimeout(() => {
                            document.getElementById('credits').style.opacity = '0';
                            ship.style.transition = 'all 2s ease-out';
                            ship.style.bottom = '15%';
                            ship.style.transform = 'translate(-50%, 0) rotate(0deg) scale(1)';
                            ship.style.filter = 'drop-shadow(0 0 15px rgba(102, 252, 241, 0.4))';

                            setTimeout(() => {
                                bh.classList.remove('active');
                                setTimeout(() => { bh.style.display = 'none'; bh.style.top = '-600px'; }, 3000);
                                cosmicStopped = false;
                                speedMultiplier = 1; 
                                state = -1;
                                isMoving = false;
                                prompt.innerText = "–ü–†–û–ë–ï–õ –ò–õ–ò –ö–õ–ò–ö ‚Äî –ù–ê–ß–ê–¢–¨";
                                prompt.style.display = 'block';
                                potCount = 0; guestIndex = 0;
                            }, 1000);
                        }, 6000);
                    }, 2500);
                }, 3000); // –í—Ä–µ–º—è –Ω–∞ "–ø–æ–¥–ª–µ—Ç" –∫ –¥—ã—Ä–µ

            }, 2500); // –í—Ä–µ–º—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ª–µ—Ç–∞
        }
    </script>
</body>
</html>
