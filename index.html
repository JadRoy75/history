<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å—é?</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@300;500;800&display=swap');

        body {
            margin: 0; overflow: hidden;
            background: #0b0c10; color: #c5c6c7;
            font-family: 'Exo 2', sans-serif; user-select: none;
            cursor: default;
            -webkit-tap-highlight-color: transparent; /* –£–±–∏—Ä–∞–µ—Ç —Å–∏–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 1; }

        header { position: absolute; top: 15px; width: 100%; text-align: center; z-index: 100; pointer-events: none; }
        h1 { font-size: 2.5rem; color: #66fcf1; text-shadow: 0 0 10px rgba(102, 252, 241, 0.4); margin: 0; }

        /* –ü–æ–¥—Å–∫–∞–∑–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        #space-prompt {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            font-size: 1.1rem; font-weight: 800; color: #45a29e;
            background: rgba(11, 12, 16, 0.9); padding: 12px 30px; border-radius: 30px;
            border: 2px solid #45a29e; z-index: 100; transition: 0.3s;
            display: none; pointer-events: none;
        }

        /* –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã */
        #cosmic-object {
            position: absolute; top: -500px; left: 50%; transform: translateX(-50%);
            width: 250px; height: 250px; z-index: 5;
            transition: top 2.5s cubic-bezier(0.25, 1, 0.5, 1);
            /* –£–±—Ä–∞–ª–∏ —Ç—è–∂–µ–ª—É—é —Ç–µ–Ω—å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
            opacity: 0.9;
        }

        #ship {
            position: absolute; bottom: 15%; left: 50%; transform: translate(-50%, 0);
            width: 90px; height: 130px; z-index: 50;
            transition: all 2s cubic-bezier(0.25, 1, 0.5, 1);
            /* –õ–µ–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ drop-shadow –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
            filter: drop-shadow(0 0 5px #66fcf1); 
        }

        /* –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
        #info-panel {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 850px; max-width: 90%; max-height: 85vh; overflow-y: auto;
            background: rgba(11, 12, 16, 0.98); /* –ü–æ—á—Ç–∏ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
            border-left: 4px solid #66fcf1; border-right: 4px solid #66fcf1;
            border-radius: 15px; padding: 30px;
            z-index: 60; opacity: 0; pointer-events: none;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        #info-panel.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: all; }
        
        h2 { color: #66fcf1; font-size: 1.8rem; margin-top: 0; text-align: center; }
        h3 { color: #45a29e; border-bottom: 1px solid #1f2833; padding-bottom: 5px; margin-top: 20px; font-size: 1.4rem;}
        p, li { font-size: 1.2rem; line-height: 1.5; color: #e0e0e0; }

        /* --- –í–°–ü–õ–´–í–ê–Æ–©–ò–ï –ü–û–†–¢–†–ï–¢–´ –ò –ü–û–î–°–ö–ê–ó–ö–ò --- */
        .hover-name, .hover-term {
            color: #ffb74d; border-bottom: 1px dashed #ffb74d; cursor: help; position: relative; font-weight: bold;
            display: inline-block; /* –í–∞–∂–Ω–æ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ */
        }
        .hover-term { color: #66fcf1; border-bottom: 1px dashed #66fcf1; }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç—É–ª—Ç–∏–ø–∞ */
        .tooltip-box {
            position: absolute; bottom: 120%; left: 50%; transform: translateX(-50%);
            width: 200px; background: #0b0c10; border: 2px solid #45a29e;
            border-radius: 10px; padding: 10px; opacity: 0; visibility: hidden;
            transition: 0.2s; z-index: 300; pointer-events: none; 
            text-align: center; box-shadow: 0 0 10px #000;
        }
        /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ò–õ–ò –ø—Ä–∏ –∫–ª–∏–∫–µ (–∫–ª–∞—Å—Å active –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º) */
        .hover-name:hover .tooltip-box, .hover-term:hover .tooltip-box,
        .hover-name.active .tooltip-box, .hover-term.active .tooltip-box {
            opacity: 1; visibility: visible; bottom: 130%;
        }
        .tooltip-img { width: 100%; height: auto; border-radius: 5px; margin-bottom: 5px; display: block; }
        .tooltip-text { font-size: 0.9rem; color: #fff; }

        /* –ö–í–ò–ó–´ */
        .quiz-btn {
            display: block; width: 100%; background: #1f2833; color: #66fcf1;
            border: 2px solid #45a29e; border-radius: 8px;
            padding: 12px; font-size: 1.1rem; margin-bottom: 10px;
            cursor: pointer; transition: 0.2s; font-family: 'Exo 2', sans-serif; font-weight: bold;
        }
        .quiz-btn:active { transform: scale(0.98); }
        .quiz-btn.correct { background: #4caf50 !important; color: white !important; border-color: #4caf50; }
        .quiz-btn.wrong { background: #f44336 !important; color: white !important; border-color: #f44336; }

        /* –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ */
        .interactive-btn {
            background: #45a29e; color: #0b0c10; border: none; padding: 10px 20px;
            font-size: 1.1rem; font-weight: bold; border-radius: 10px; cursor: pointer;
            transition: 0.2s; margin-top: 10px;
        }
        .interactive-btn:active { transform: translateY(2px); }

        .hotel-container { overflow: hidden; width: 100%; position: relative; margin: 15px 0; }
        .hotel { display: flex; gap: 10px; transition: transform 0.5s ease; padding: 5px; }
        .room {
            min-width: 70px; height: 70px; background: #1f2833; border: 2px solid #66fcf1;
            border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 1.8rem; position: relative;
        }
        .room-num { font-size: 0.7rem; color: #45a29e; position: absolute; top: 2px; }
        
        .infinity-sim { display: flex; gap: 10px; margin-top: 15px; }
        .sim-box { flex: 1; background: #1f2833; padding: 10px; border-radius: 10px; text-align: center; border: 1px solid #45a29e; }
        .sim-display { font-size: 1.5rem; color: #66fcf1; font-weight: bold; margin: 5px 0; height: 35px;}
        input[type=range] { width: 90%; }

        /* –ß–ï–†–ù–ê–Ø –î–´–†–ê */
        #black-hole {
            position: absolute; top: -600px; left: 50%; transform: translateX(-50%) scale(0.1);
            width: 400px; height: 400px; border-radius: 50%; /* –ß—É—Ç—å –º–µ–Ω—å—à–µ –¥–ª—è –º–æ–±–∏–ª–æ–∫ */
            background: radial-gradient(circle, #000000 30%, #1a052e 60%, transparent 100%);
            /* –£–±—Ä–∞–ª–∏ —Ç—è–∂–µ–ª—ã–π box-shadow */
            z-index: 45; transition: top 3s cubic-bezier(0.25, 1, 0.5, 1), transform 3s ease-in;
            display: none;
        }
        #black-hole.active { top: 50%; transform: translate(-50%, -50%) scale(1.5); }

        #credits {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 200;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 2s;
        }
        #credits h1 { font-size: 3rem; color: #66fcf1; text-align: center;}
        #credits p { font-size: 1.5rem; color: #45a29e; }
    </style>
</head>
<body>

    <header><h1>–ß–¢–û –°–ö–†–´–í–ê–ï–¢–°–Ø –ó–ê –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨–Æ?</h1></header>

    <canvas id="starfield"></canvas>
    <div id="cosmic-object"></div>
    <div id="black-hole"></div>

    <div id="ship">
        <svg viewBox="0 0 100 150">
            <path d="M 40 120 Q 50 150 60 120" fill="#45a29e" filter="blur(2px)"/>
            <path d="M 50 10 L 80 100 L 50 120 L 20 100 Z" fill="#e0e0e0"/>
            <path d="M 50 30 Q 65 60 50 80 Q 35 60 50 30" fill="#66fcf1"/>
            <path d="M 20 100 L 5 120 L 30 110 Z" fill="#45a29e"/>
            <path d="M 80 100 L 95 120 L 70 110 Z" fill="#45a29e"/>
        </svg>
    </div>

    <div id="info-panel">
        <h2 id="info-title"></h2>
        <div id="info-text"></div>
    </div>

    <div id="space-prompt" class="pulse">–ö–õ–ò–ö–ù–ò–¢–ï, –ß–¢–û–ë–´ –ù–ê–ß–ê–¢–¨</div>

    <div id="credits">
        <h1>–ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨</h1>
        <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª 10 –∫–ª–∞—Å—Å</p>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï (–° –ü–û–†–¢–†–ï–¢–ê–ú–ò) ---
        const content = [
            {
                type: 'info', planet: 'üåç', color: '#45a29e',
                title: '1Ô∏è‚É£ –ü–æ–Ω—è—Ç–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏',
                text: `<p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É —á–µ–≥–æ-—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ü–∞. –≠—Ç–æ –Ω–µ —á–∏—Å–ª–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–æ–µ —á–∏—Å–ª–æ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ 1.</p>
                       <ul><li>—Ä—è–¥ —á–∏—Å–µ–ª: 1, 2, 3... ‚Äî –µ–≥–æ –Ω–µ–ª—å–∑—è –∑–∞–∫–æ–Ω—á–∏—Ç—å;</li><li>–ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è ‚Äî —É –Ω–µ—ë –Ω–µ—Ç –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞.</li></ul>
                       <p>–î–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–Ω–∞–∫ ‚àû.</p>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#66fcf1',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 1',
                text: `<p>–Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –æ–±—ã—á–Ω—ã–º —á–∏—Å–ª–æ–º?</p>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–î–∞, —ç—Ç–æ —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ</button>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–ù–µ—Ç, —ç—Ç–æ –∏–¥–µ—è/–∫–æ–Ω—Ü–µ–ø—Ü–∏—è</button>`
            },
            {
                type: 'info', planet: 'ü™ê', color: '#ffb74d',
                title: '2Ô∏è‚É£ –ò—Å—Ç–æ—Ä–∏—è',
                text: `<h3>üèõ –î—Ä–µ–≤–Ω—è—è –ì—Ä–µ—Ü–∏—è</h3><p>
                       <span class="hover-name" onclick="toggleTooltip(this)">–ê—Ä–∏—Å—Ç–æ—Ç–µ–ª—å<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Aristotle_Altemps_Inv8575.jpg/220px-Aristotle_Altemps_Inv8575.jpg" class="tooltip-img"><div class="tooltip-text">384‚Äì322 –¥–æ –Ω. —ç.</div></span></span> 
                       —Å—á–∏—Ç–∞–ª, —á—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å. 
                       <span class="hover-name" onclick="toggleTooltip(this)">–ó–µ–Ω–æ–Ω<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Zeno_of_Elea_Tibaldi_or_Carducho.jpg/220px-Zeno_of_Elea_Tibaldi_or_Carducho.jpg" class="tooltip-img"><div class="tooltip-text">–æ–∫. 490‚Äì430 –¥–æ –Ω. —ç.</div></span></span> 
                       –ø—Ä–∏–¥—É–º–∞–ª –ø–∞—Ä–∞–¥–æ–∫—Å—ã.</p>
                       <h3>üìê XVII –≤–µ–∫</h3><p>
                       <span class="hover-name" onclick="toggleTooltip(this)">–î–∂–æ–Ω –í–∞–ª–ª–∏—Å<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/John_Wallis_by_Sir_Godfrey_Kneller%2C_Bt.jpg/220px-John_Wallis_by_Sir_Godfrey_Kneller%2C_Bt.jpg" class="tooltip-img"><div class="tooltip-text">1616‚Äì1703</div></span></span> 
                       –≤–ø–µ—Ä–≤—ã–µ –≤–≤—ë–ª –∑–Ω–∞–∫ ‚àû.</p>
                       <h3>üìä XIX –≤–µ–∫</h3><p>
                       <span class="hover-name" onclick="toggleTooltip(this)">–ì–µ–æ—Ä–≥ –ö–∞–Ω—Ç–æ—Ä<span class="tooltip-box"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Georg_Cantor2.jpg" class="tooltip-img"><div class="tooltip-text">1845‚Äì1918</div></span></span> 
                       –¥–æ–∫–∞–∑–∞–ª, —á—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ –±—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–º–∏.</p>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#e0e0e0',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 2',
                text: `<p>–ö—Ç–æ –≤–ø–µ—Ä–≤—ã–µ –≤–≤–µ–ª –∑–Ω–∞–∫ ‚àû?</p>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–î–∂–æ–Ω –í–∞–ª–ª–∏—Å</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ì–µ–æ—Ä–≥ –ö–∞–Ω—Ç–æ—Ä</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ó–µ–Ω–æ–Ω –≠–ª–µ–π—Å–∫–∏–π</button>`
            },
            {
                type: 'info', planet: 'üåå', color: '#66fcf1',
                title: '3Ô∏è‚É£ –í–∏–¥—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π',
                text: `<div class="infinity-sim">
                           <div class="sim-box">
                               <p><b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è</b></p>
                               <div class="sim-display" id="pot-count">0</div>
                               <button class="interactive-btn" onclick="addPotential()">–°—á–∏—Ç–∞—Ç—å</button>
                           </div>
                           <div class="sim-box">
                               <p><b>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</b></p>
                               <div class="sim-display" id="act-show">?</div>
                               <button class="interactive-btn" onclick="document.getElementById('act-show').innerText = '{1, 2... ‚àû}'">–í—Å—ë —Å—Ä–∞–∑—É</button>
                           </div>
                       </div>
                       <hr style="border-color: #45a29e;">
                       <p><b>üî¢ –°—á—ë—Ç–Ω–∞—è:</b> –ú–æ–∂–Ω–æ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞—Ç—å (1, 2, 3...).</p>
                       <p><b>üåä –ù–µ—Å—á—ë—Ç–Ω–∞—è:</b> –ù–µ–ª—å–∑—è –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞—Ç—å (—Ç–æ—á–∫–∏ –Ω–∞ –ª–∏–Ω–∏–∏).</p>
                       <div class="sim-box" style="margin-top: 15px;">
                           <p style="margin-top:0;"><b>–õ—É–ø–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ (0...1):</b></p>
                           <input type="range" min="1" max="10" value="1" oninput="document.getElementById('zoom-res').innerText = '0.' + '0'.repeat(this.value) + '1...'">
                           <div id="zoom-res" style="font-size: 1.5rem; color: #66fcf1; font-weight: bold; margin-top: 5px;">0.1...</div>
                       </div>`
            },
            {
                type: 'info', planet: 'üöÄ', color: '#45a29e',
                title: '4Ô∏è‚É£ –ü–∞—Ä–∞–¥–æ–∫—Å—ã',
                text: `<h3>üè® –û—Ç–µ–ª—å –ì–∏–ª—å–±–µ—Ä—Ç–∞</h3>
                       <p>–í –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –æ—Ç–µ–ª—å –ø—Ä–∏–µ—Ö–∞–ª –≥–æ—Å—Ç—å. –í—Å–µ –ø–µ—Ä–µ–µ–∑–∂–∞—é—Ç –≤ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–Ω–∞—Ç—É (1‚Üí2, 2‚Üí3...), –∏ ‚Ññ1 –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è.</p>
                       <div class="hotel-container">
                           <div class="hotel" id="hotel-track">
                               <div class="room"><span class="room-num">1</span><span class="guest">üê±</span></div>
                               <div class="room"><span class="room-num">2</span><span class="guest">üê∂</span></div>
                               <div class="room"><span class="room-num">3</span><span class="guest">ü¶ä</span></div>
                               <div class="room"><span class="room-num">4</span><span class="guest">üêº</span></div>
                           </div>
                       </div>
                       <button class="interactive-btn" style="margin: 0 auto; display: block;" onclick="addGuest()">–ó–∞—Å–µ–ª–∏—Ç—å –≥–æ—Å—Ç—è!</button>
                       
                       <h3>üê¢ –ê—Ö–∏–ª–ª–µ—Å –∏ —á–µ—Ä–µ–ø–∞—Ö–∞</h3>
                       <p>–ê—Ö–∏–ª–ª–µ—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–≥–æ–Ω–∏—Ç —á–µ—Ä–µ–ø–∞—Ö—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–æ–±–µ–≥–∞–µ—Ç –ª–∏—à—å –ø–æ–ª–æ–≤–∏–Ω—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è.</p>
                       <div style="background: #1f2833; height: 40px; position: relative; border-radius: 25px; margin: 15px 0; overflow: hidden; border: 1px solid #45a29e;">
                           <span id="ach" style="position: absolute; font-size: 25px; left: 0%; top: 5px; transition: 0.5s;">üèÉ</span>
                           <span id="tur" style="position: absolute; font-size: 25px; left: 50%; top: 5px; transition: 0.5s;">üê¢</span>
                       </div>
                       <button class="interactive-btn" style="margin: 0 auto; display: block;" onclick="stepAchilles()">–ë–µ–∂–∞—Ç—å!</button>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#ffb74d',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 3',
                text: `<p>–ú–æ–∂–µ—Ç –ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –æ—Ç–µ–ª—å –ø—Ä–∏–Ω—è—Ç—å –≥–æ—Å—Ç—è?</p>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ù–µ—Ç, –º–µ—Å—Ç –Ω–µ—Ç</button>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–î–∞, –µ—Å–ª–∏ –≤—Å–µ —Å–¥–≤–∏–Ω—É—Ç—Å—è</button>`
            },
            {
                type: 'info', planet: 'üõ∞Ô∏è', color: '#66fcf1',
                title: '5Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ',
                text: `<h3>üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ & üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</h3><p>–ê–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–π, —Ü–∏–∫–ª—ã.</p>
                       <h3>‚öõ –§–∏–∑–∏–∫–∞ (–ß–µ—Ä–Ω—ã–µ –¥—ã—Ä—ã)</h3>
                       <p>–¢–∞–º –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π.</p>
                       <div class="sim-box" style="margin-top: 15px;">
                           <p style="margin-top:0;"><b>–°–∏–º—É–ª—è—Ç–æ—Ä —Å–∂–∞—Ç–∏—è –∑–≤–µ–∑–¥—ã:</b></p>
                           <input type="range" min="1" max="100" value="1" oninput="document.getElementById('density').innerText = this.value === '100' ? '–ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨ ‚àû' : this.value * 1000 + ' —Ç–æ–Ω–Ω/—Å–º¬≥'">
                           <div id="density" style="font-size: 1.5rem; color: #66fcf1; font-weight: bold; margin-top: 5px;">1000 —Ç–æ–Ω–Ω/—Å–º¬≥</div>
                       </div>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#45a29e',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 4',
                text: `<p>–ì–¥–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å?</p>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–í —á—ë—Ä–Ω—ã—Ö –¥—ã—Ä–∞—Ö</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–í –∑–≤–µ–∑–¥–∞—Ö</button>`
            },
            {
                type: 'info', planet: 'üìö', color: '#45a29e',
                title: '6Ô∏è‚É£ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ',
                text: `<p>–í —à–∫–æ–ª–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å:</p>
                       <ul>
                           <li>—á–∏—Å–ª–∞, –ø—Ä—è–º—ã–µ, –¥—Ä–æ–±–∏;</li>
                           <li><span class="hover-term" onclick="toggleTooltip(this)">–ø—Ä–µ–¥–µ–ª—ã<span class="tooltip-box"><div class="tooltip-text">–ß–∏—Å–ª–æ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –º—ã –ø—Ä–∏–±–ª–∏–∂–∞–µ–º—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–ª–∏–∑–∫–æ.<br>2.999... -> 3</div></span></span> (–≤ —Å—Ç–∞—Ä—à–∏—Ö –∫–ª–∞—Å—Å–∞—Ö).</li>
                       </ul>
                       <h3 style="color: #66fcf1; font-size: 1.5rem;">üèÅ –ò—Ç–æ–≥</h3>
                       <p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –í—Å–µ–ª–µ–Ω–Ω–æ–π.</p>`
            }
        ];

        // --- –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ö–ê–ù–í–ê–° (–ú–ï–ù–¨–®–ï –ó–í–ï–ó–î –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê) ---
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        // –ú–µ–Ω—å—à–µ –∑–≤–µ–∑–¥ –¥–ª—è –º–æ–±–∏–ª–æ–∫
        const isMobile = window.innerWidth < 768;
        const starCount = isMobile ? 80 : 300; 

        const stars = [];
        for (let i = 0; i < starCount; i++) stars.push({ x: Math.random() * width, y: Math.random() * height, z: Math.random() * 2 + 0.5 });

        let speedMultiplier = 1;
        let cosmicStopped = false;

        function drawStars() {
            ctx.fillStyle = '#0b0c10'; ctx.fillRect(0, 0, width, height); ctx.fillStyle = '#c5c6c7';
            for (let star of stars) {
                ctx.beginPath(); ctx.arc(star.x, star.y, star.z, 0, Math.PI * 2); ctx.fill();
                if (!cosmicStopped) { star.y += star.z * speedMultiplier; if (star.y > height) star.y = 0; }
            }
            requestAnimationFrame(drawStars);
        }
        drawStars();
        window.addEventListener('resize', () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; });

        // --- –õ–û–ì–ò–ö–ê ---
        let state = -1;
        let isMoving = false;
        let quizActive = false;

        const panel = document.getElementById('info-panel');
        const prompt = document.getElementById('space-prompt');
        const ship = document.getElementById('ship');
        const cosmicObject = document.getElementById('cosmic-object');

        function setPlanet(emoji, color) {
            cosmicObject.innerHTML = `<svg viewBox="0 0 100 100" style="filter: drop-shadow(0 0 20px ${color});"><circle cx="50" cy="50" r="48" fill="${color}" fill-opacity="0.2" stroke="${color}" stroke-width="2"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" font-size="60">${emoji}</text></svg>`;
        }

        // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–õ–ò–ö–û–í –ò –¢–ê–ü–û–í
        document.addEventListener('click', (e) => {
            // –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ, –ø–æ–ª–∑—É–Ω–∫—É –∏–ª–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º—É —Å–ª–æ–≤—É - –Ω–µ –ª–∏—Å—Ç–∞–µ–º
            if (e.target.closest('button') || e.target.closest('input') || e.target.closest('.hover-name') || e.target.closest('.hover-term')) return;
            
            tryAdvance();
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                tryAdvance();
            }
        });

        function tryAdvance() {
            if (!isMoving && !quizActive && state === -1) {
                advance();
            } else if (!isMoving && !quizActive && content[state].type !== 'quiz') {
                advance();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ç—É–ª—Ç–∏–ø–æ–≤ –ø–æ –∫–ª–∏–∫—É (–¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤)
        window.toggleTooltip = function(el) {
            el.classList.toggle('active');
            // –°–∫—Ä—ã—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ
            document.querySelectorAll('.hover-name, .hover-term').forEach(item => {
                if (item !== el) item.classList.remove('active');
            });
        }

        prompt.style.display = 'block';

        function advance() {
            isMoving = true;
            panel.classList.remove('visible');
            prompt.style.display = 'none';
            speedMultiplier = 20; 

            state++;

            if (state >= content.length) { finalAnimation(); return; }

            cosmicObject.style.top = '120vh'; 

            quizActive = content[state].type === 'quiz';

            setTimeout(() => {
                setPlanet(content[state].planet, content[state].color);
                cosmicObject.style.transition = 'none';
                cosmicObject.style.top = '-300px';

                setTimeout(() => {
                    cosmicObject.style.transition = 'top 2s cubic-bezier(0.25, 1, 0.5, 1)';
                    cosmicObject.style.top = '20%';

                    setTimeout(() => {
                        speedMultiplier = 1; 
                        document.getElementById('info-title').innerText = content[state].title;
                        document.getElementById('info-text').innerHTML = content[state].text;
                        panel.classList.add('visible');
                        
                        if (!quizActive) {
                            prompt.innerText = "–ö–õ–ò–ö–ù–ò–¢–ï –î–õ–Ø –ü–†–û–î–û–õ–ñ–ï–ù–ò–Ø";
                            prompt.style.display = 'block';
                        }
                        isMoving = false;
                        if (content[state].title.includes("–ü–∞—Ä–∞–¥–æ–∫—Å—ã")) resetAchilles();
                    }, 1500);
                }, 100);
            }, 800);
        }

        // --- –ö–í–ò–ó–´ ---
        window.checkAnswer = function(btn, isCorrect) {
            const allBtns = btn.parentElement.querySelectorAll('.quiz-btn');
            allBtns.forEach(b => b.disabled = true);

            if (isCorrect) {
                btn.classList.add('correct');
                btn.innerText += " ‚úÖ";
            } else {
                btn.classList.add('wrong');
                btn.innerText += " ‚ùå";
                allBtns.forEach(b => { if(b.dataset.correct === "true") b.classList.add('correct'); });
            }
            setTimeout(() => { quizActive = false; advance(); }, 1200);
        };

        // --- –ò–ù–¢–ï–†–ê–ö–¢–ò–í ---
        let potCount = 0;
        window.addPotential = function() {
            potCount++; document.getElementById('pot-count').innerText = potCount;
        }

        const newGuests = ['üëΩ', 'ü§ñ', 'üëª', 'ü¶Ñ'];
        let guestIndex = 0;
        window.addGuest = function() {
            const track = document.getElementById('hotel-track');
            track.style.transform = 'translateX(85px)';
            setTimeout(() => {
                track.style.transition = 'none'; track.style.transform = 'translateX(0)';
                const newEmoji = newGuests[guestIndex % newGuests.length];
                guestIndex++;
                track.insertAdjacentHTML('afterbegin', `<div class="room"><span class="room-num">1</span><span class="guest">${newEmoji}</span></div>`);
                if (track.children.length > 4) track.removeChild(track.children[4]);
                Array.from(track.children).forEach((room, idx) => room.querySelector('.room-num').innerText = idx + 1);
                setTimeout(() => track.style.transition = 'transform 0.5s ease', 50);
            }, 500);
        };

        let achPos = 0, turPos = 50;
        function resetAchilles() { achPos = 0; turPos = 50; }
        window.stepAchilles = function() {
            achPos = achPos + (turPos - achPos) / 2;
            turPos += 1; 
            document.getElementById('ach').style.left = achPos + '%';
            document.getElementById('tur').style.left = turPos + '%';
        };

        // --- –§–ò–ù–ê–õ ---
        function finalAnimation() {
            prompt.style.display = 'none';
            cosmicObject.style.display = 'none';
            
            speedMultiplier = 30; // 1. –õ–µ—Ç–∏–º –±—ã—Å—Ç—Ä–æ

            setTimeout(() => {
                // 2. –ó–∞–º–µ–¥–ª—è–µ–º—Å—è –ø–µ—Ä–µ–¥ –¥—ã—Ä–æ–π
                let slow = setInterval(() => {
                    if(speedMultiplier > 2) speedMultiplier -= 1;
                    else clearInterval(slow);
                }, 50);

                const bh = document.getElementById('black-hole');
                bh.style.display = 'block'; 
                bh.style.transition = 'top 4s ease-out, transform 4s ease-out';
                
                setTimeout(() => bh.classList.add('active'), 100); 

                setTimeout(() => {
                    speedMultiplier = 50; // 3. –£—Å–∫–æ—Ä—è–µ–º—Å—è –í–ù–£–¢–†–¨
                    cosmicStopped = false; 
                    
                    ship.style.transition = 'all 2s ease-in';
                    ship.style.bottom = '50%';
                    ship.style.transform = 'translate(-50%, 50%) rotate(720deg) scale(0)';
                    ship.style.filter = 'brightness(0)';

                    setTimeout(() => {
                        cosmicStopped = true; 
                        document.getElementById('credits').style.opacity = '1';

                        setTimeout(() => {
                            document.getElementById('credits').style.opacity = '0';
                            ship.style.transition = 'all 2s ease-out';
                            ship.style.bottom = '15%';
                            ship.style.transform = 'translate(-50%, 0) rotate(0deg) scale(1)';
                            ship.style.filter = '';

                            setTimeout(() => {
                                bh.classList.remove('active');
                                setTimeout(() => { bh.style.display = 'none'; bh.style.top = '-600px'; }, 3000);
                                cosmicStopped = false;
                                speedMultiplier = 1; 
                                state = -1;
                                isMoving = false;
                                prompt.innerText = "–ö–õ–ò–ö–ù–ò–¢–ï –î–õ–Ø –ù–ê–ß–ê–õ–ê";
                                prompt.style.display = 'block';
                                potCount = 0; guestIndex = 0;
                            }, 1000);
                        }, 5000);
                    }, 2000);
                }, 3500);

            }, 2000);
        }
    </script>
</body>
</html>
