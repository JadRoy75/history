<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å—é?</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@300;500;800&display=swap');

        body {
            margin: 0; overflow: hidden;
            background: #0b0c10; color: #c5c6c7;
            font-family: 'Exo 2', sans-serif; user-select: none;
            cursor: default;
            -webkit-tap-highlight-color: transparent;
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 1; }

        header { position: absolute; top: 15px; width: 100%; text-align: center; z-index: 100; pointer-events: none; }
        h1 { 
            font-size: 2.5rem; color: #66fcf1; 
            text-shadow: 0 0 15px rgba(102, 252, 241, 0.6); margin: 0; 
            padding: 0 10px;
        }

        /* --- –ü–û–î–°–ö–ê–ó–ö–ò –í –¢–ï–ö–°–¢–ï --- */
        .hover-name, .hover-term {
            color: #ffb74d; border-bottom: 1px dashed #ffb74d; cursor: help; font-weight: bold; position: relative;
            transition: color 0.3s;
        }
        .hover-term { color: #66fcf1; border-bottom-color: #66fcf1; }
        .hover-name:hover { color: #fff; border-bottom-color: #fff; }

        /* --- –ì–õ–û–ë–ê–õ–¨–ù–´–ô –¢–£–õ–¢–ò–ü (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô) --- */
        #global-tooltip {
            position: fixed; 
            background: rgba(15, 20, 30, 0.98); /* –ë–æ–ª–µ–µ –ø–ª–æ—Ç–Ω—ã–π —Ñ–æ–Ω */
            border: 2px solid #45a29e; border-radius: 12px;
            padding: 15px; width: 240px;
            color: white; font-size: 1rem; text-align: center;
            opacity: 0; visibility: hidden; pointer-events: none; z-index: 9999;
            box-shadow: 0 0 30px rgba(0,0,0,1);
            transition: opacity 0.2s, transform 0.2s;
            transform: translateY(10px);
        }
        #global-tooltip.active { opacity: 1; visibility: visible; transform: translateY(0); }
        
        #tooltip-img { 
            width: 100%; height: auto; 
            border-radius: 6px; margin-bottom: 10px; 
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è */
            border: 1px solid #444;
        }
        .tooltip-years { 
            color: #ffb74d; font-weight: bold; display: block; 
            margin-top: 5px; font-size: 1.1rem; border-top: 1px solid #333; padding-top: 5px;
        }

        /* --- –û–ë–™–ï–ö–¢–´ --- */
        #cosmic-object {
            position: absolute; top: -500px; left: 50%; transform: translateX(-50%);
            width: 300px; height: 300px; z-index: 5;
            transition: top 2.5s cubic-bezier(0.25, 1, 0.5, 1);
            filter: drop-shadow(0 0 30px rgba(102, 252, 241, 0.2));
        }

        #ship {
            position: absolute; bottom: 15%; left: 50%; transform: translate(-50%, 0);
            width: 90px; height: 130px; z-index: 50;
            transition: all 3s cubic-bezier(0.25, 1, 0.5, 1);
            filter: drop-shadow(0 0 15px rgba(102, 252, 241, 0.4));
        }

        /* --- –ü–ê–ù–ï–õ–¨ --- */
        #info-panel {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 850px; max-width: 90%; max-height: 80vh; overflow-y: auto;
            background: rgba(11, 12, 16, 0.95);
            border-left: 5px solid #66fcf1; border-right: 5px solid #66fcf1;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            border-radius: 15px; padding: 30px;
            z-index: 60; opacity: 0; pointer-events: none;
            transition: all 0.5s ease; backdrop-filter: blur(10px);
        }
        #info-panel.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: all; }

        h2 { color: #66fcf1; font-size: 1.8rem; margin-top: 0; text-align: center; }
        h3 { color: #45a29e; border-bottom: 1px solid #1f2833; padding-bottom: 5px; margin-top: 20px; font-size: 1.3rem; }
        p, li { font-size: 1.15rem; line-height: 1.5; color: #e0e0e0; }

        /* --- –≠–õ–ï–ú–ï–ù–¢–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø --- */
        #space-prompt {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            font-size: 1rem; font-weight: 800; color: #45a29e;
            background: rgba(11, 12, 16, 0.9); padding: 12px 25px; border-radius: 30px;
            border: 2px solid #45a29e; z-index: 100; transition: 0.3s;
            white-space: nowrap; pointer-events: none;
            display: none;
        }

        .quiz-btn {
            display: block; width: 100%; background: #1f2833; color: #66fcf1;
            border: 2px solid #45a29e; border-radius: 8px;
            padding: 15px; font-size: 1.1rem; margin-bottom: 10px;
            cursor: pointer; transition: 0.2s; font-weight: bold;
        }
        .quiz-btn:active { transform: scale(0.98); }
        .quiz-btn.correct { background: #4caf50 !important; color: white !important; border-color: #4caf50; }
        .quiz-btn.wrong { background: #f44336 !important; color: white !important; border-color: #f44336; }

        .interactive-btn {
            background: #45a29e; color: #0b0c10; border: none; padding: 12px 20px;
            font-size: 1.1rem; font-weight: bold; border-radius: 10px; cursor: pointer;
            transition: 0.2s; margin-top: 10px; display: block; margin-left: auto; margin-right: auto;
        }
        .interactive-btn:active { transform: scale(0.95); }

        /* –û–¢–ï–õ–¨ */
        .hotel-container { overflow: hidden; width: 100%; position: relative; margin: 15px 0; }
        .hotel { display: flex; gap: 10px; transition: transform 0.5s ease; padding: 5px; }
        .room {
            min-width: 60px; height: 60px; background: #1f2833; border: 2px solid #66fcf1;
            border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 1.5rem; flex-shrink: 0;
        }
        .room-num { font-size: 0.7rem; color: #45a29e; }

        /* –°–ò–ú–£–õ–Ø–¢–û–†–´ */
        .infinity-sim { display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
        .sim-box { flex: 1; min-width: 140px; background: #1f2833; padding: 10px; border-radius: 10px; text-align: center; border: 2px solid #45a29e; }
        input[type=range] { width: 100%; }

        /* –ß–ï–†–ù–ê–Ø –î–´–†–ê */
        #black-hole {
            position: absolute; top: -600px; left: 50%; transform: translateX(-50%) scale(0.1);
            width: 600px; height: 600px; border-radius: 50%;
            background: radial-gradient(circle, #000000 30%, #1a052e 50%, transparent 100%);
            box-shadow: inset 0 0 80px #000, 0 0 120px rgba(102, 252, 241, 0.5);
            z-index: 45; transition: top 3s cubic-bezier(0.25, 1, 0.5, 1), transform 3s ease-in;
            animation: spin 10s linear infinite;
            display: none;
        }
        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        #black-hole.active { top: 50%; transform: translate(-50%, -50%) scale(1.5); }

        #credits {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 200;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 2s;
        }
        #credits h1 { font-size: 3rem; color: #66fcf1; text-align: center; }
        #credits p { font-size: 1.5rem; color: #45a29e; }

        /* --- –ú–û–ë–ò–õ–¨–ù–ê–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø --- */
        @media (max-width: 768px) {
            #ship { filter: none !important; width: 70px; height: 100px; }
            #cosmic-object { filter: none !important; width: 200px; height: 200px; }
            .stars { display: none; }
            h1 { font-size: 1.5rem; }
            #info-panel { width: 95%; padding: 20px; max-height: 70vh; }
            h2 { font-size: 1.4rem; }
            p, li { font-size: 1rem; }
            .infinity-sim { flex-direction: column; }
            #black-hole { box-shadow: inset 0 0 40px #000; width: 300px; height: 300px; }
            /* –¢—É–ª—Ç–∏–ø –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω —Å–Ω–∏–∑—É –¥–ª—è –º–æ–±–∏–ª–æ–∫ */
            #global-tooltip {
                width: 90%; left: 5% !important; bottom: 10px !important; top: auto !important;
                transform: none !important;
            }
        }
    </style>
</head>
<body>

    <header><h1>–ß–¢–û –°–ö–†–´–í–ê–ï–¢–°–Ø –ó–ê –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨–Æ?</h1></header>

    <canvas id="starfield"></canvas>
    <div id="cosmic-object"></div>
    <div id="black-hole"></div>

    <div id="ship">
        <svg viewBox="0 0 100 150">
            <path d="M 40 120 Q 50 150 60 120" fill="#45a29e" filter="blur(3px)"/>
            <path d="M 50 10 L 80 100 L 50 120 L 20 100 Z" fill="#e0e0e0"/>
            <path d="M 50 30 Q 65 60 50 80 Q 35 60 50 30" fill="#66fcf1"/>
            <path d="M 20 100 L 5 120 L 30 110 Z" fill="#45a29e"/>
            <path d="M 80 100 L 95 120 L 70 110 Z" fill="#45a29e"/>
        </svg>
    </div>

    <div id="info-panel">
        <h2 id="info-title"></h2>
        <div id="info-text"></div>
    </div>

    <div id="space-prompt">–ù–ê–ñ–ú–ò–¢–ï –ò–õ–ò –ö–û–°–ù–ò–¢–ï–°–¨ –≠–ö–†–ê–ù–ê</div>
    
    <div id="global-tooltip">
        <img src="" id="tooltip-img" onerror="this.style.display='none'">
        <div id="tooltip-text"></div>
    </div>

    <div id="credits">
        <h1>–ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨</h1>
        <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª 10 –∫–ª–∞—Å—Å</p>
    </div>

    <script>
        const isMobile = window.innerWidth < 768;

        // --- –î–ê–ù–ù–´–ï (–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤) ---
        const content = [
            {
                type: 'info', planet: 'üåç', color: '#45a29e',
                title: '1Ô∏è‚É£ –ü–æ–Ω—è—Ç–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏',
                text: `<p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ, –æ–∑–Ω–∞—á–∞—é—â–µ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ü–∞. –≠—Ç–æ –Ω–µ —á–∏—Å–ª–æ, –∞ –∏–¥–µ—è, —Ç–∞–∫ –∫–∞–∫ —É —á–∏—Å–ª–∞ –µ—Å—Ç—å –ø—Ä–µ–¥–µ–ª, –∞ —É –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ ‚Äî –Ω–µ—Ç.</p>
                       <p><b>–ü—Ä–∏–º–µ—Ä—ã:</b></p>
                       <ul><li>—Ä—è–¥ —á–∏—Å–µ–ª: 1, 2, 3... (–Ω–µ–ª—å–∑—è –∑–∞–∫–æ–Ω—á–∏—Ç—å);</li><li>–ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è (–Ω–µ—Ç –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞);</li><li>–¥–µ–ª–µ–Ω–∏–µ: —á–∏—Å–ª–æ –º–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.</li></ul>
                       <p>–ó–Ω–∞–∫: ‚àû (–ª–µ–∂–∞—â–∞—è –≤–æ—Å—å–º—ë—Ä–∫–∞).</p>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#66fcf1',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 1: –°—É—Ç—å',
                text: `<p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω–æ–µ —á–∏—Å–ª–æ?</p>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–î–∞, —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ</button>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–ù–µ—Ç, —ç—Ç–æ –ø–æ–Ω—è—Ç–∏–µ</button>`
            },
            {
                type: 'info', planet: 'ü™ê', color: '#ffb74d',
                title: '2Ô∏è‚É£ –ò—Å—Ç–æ—Ä–∏—è',
                text: `<h3>üèõ –î—Ä–µ–≤–Ω—è—è –ì—Ä–µ—Ü–∏—è</h3><p>
                       <span class="hover-name" data-img="aristotle.jpg" data-years="384‚Äì322 –¥–æ –Ω. —ç.">–ê—Ä–∏—Å—Ç–æ—Ç–µ–ª—å</span> 
                       —Å—á–∏—Ç–∞–ª, —á—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è). 
                       <span class="hover-name" data-img="zeno.jpg" data-years="–æ–∫. 490‚Äì430 –¥–æ –Ω. —ç.">–ó–µ–Ω–æ–Ω –≠–ª–µ–π—Å–∫–∏–π</span> 
                       –ø—Ä–∏–¥—É–º–∞–ª –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–µ –ø–∞—Ä–∞–¥–æ–∫—Å—ã (–ê—Ö–∏–ª–ª–µ—Å –∏ —á–µ—Ä–µ–ø–∞—Ö–∞).</p>
                       <h3>üìê XVII –≤–µ–∫</h3><p>
                       <span class="hover-name" data-img="wallis.jpg" data-years="1616‚Äì1703">–î–∂–æ–Ω –í–∞–ª–ª–∏—Å</span> 
                       –≤–ø–µ—Ä–≤—ã–µ –≤–≤—ë–ª –∑–Ω–∞–∫ ‚àû.</p>
                       <h3>üìä XIX –≤–µ–∫</h3><p>
                       <span class="hover-name" data-img="cantor.jpg" data-years="1845‚Äì1918">–ì–µ–æ—Ä–≥ –ö–∞–Ω—Ç–æ—Ä</span> 
                       –¥–æ–∫–∞–∑–∞–ª, —á—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π –±—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–æ–≤ –∏ –æ–Ω–∏ –±—ã–≤–∞—é—Ç —Ä–∞–∑–Ω–æ–≥–æ "—Ä–∞–∑–º–µ—Ä–∞".</p>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#e0e0e0',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 2: –ó–Ω–∞–∫ ‚àû',
                text: `<p>–ö—Ç–æ –ø—Ä–∏–¥—É–º–∞–ª –∑–Ω–∞–∫ ‚àû?</p>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–î–∂–æ–Ω –í–∞–ª–ª–∏—Å</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ì–µ–æ—Ä–≥ –ö–∞–Ω—Ç–æ—Ä</button>`
            },
            {
                type: 'info', planet: 'üåå', color: '#66fcf1',
                title: '3Ô∏è‚É£ –í–∏–¥—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π',
                text: `<p><b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è</b> (–ü—Ä–æ—Ü–µ—Å—Å) vs <b>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</b> (–û–±—ä–µ–∫—Ç)</p>
                       <div class="infinity-sim">
                           <div class="sim-box">
                               <p style="margin:5px"><b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è</b></p>
                               <div class="sim-display" id="pot-count">0</div>
                               <button class="interactive-btn" onclick="addPotential()">–°—á–∏—Ç–∞—Ç—å +1</button>
                           </div>
                           <div class="sim-box">
                               <p style="margin:5px"><b>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è</b></p>
                               <div class="sim-display" id="act-show" style="font-size:1.5rem">?</div>
                               <button class="interactive-btn" onclick="document.getElementById('act-show').innerText = '{1, 2... ‚àû}'">–ü–æ–∫–∞–∑–∞—Ç—å</button>
                           </div>
                       </div>
                       <hr style="border-color: #45a29e;">
                       <p><b>üî¢ –°—á—ë—Ç–Ω–∞—è:</b> –ú–æ–∂–Ω–æ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞—Ç—å (1, 2, 3...). –ü—Ä–∏–º–µ—Ä: —ç—Ç–∞–∂–∏, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞.</p>
                       <p><b>üåä –ù–µ—Å—á—ë—Ç–Ω–∞—è:</b> –ù–µ–ª—å–∑—è –ø–æ—Å—á–∏—Ç–∞—Ç—å. –ü—Ä–∏–º–µ—Ä: –≤—Å–µ —Ç–æ—á–∫–∏ –Ω–∞ –ª–∏–Ω–∏–∏, –≤—Å–µ —á–∏—Å–ª–∞ –º–µ–∂–¥—É 0 –∏ 1.</p>
                       <div class="sim-box">
                           <p><b>–õ—É–ø–∞:</b> –û—Ç—Ä–µ–∑–æ–∫ 0-1 –±–µ—Å–∫–æ–Ω–µ—á–µ–Ω.</p>
                           <input type="range" min="1" max="10" value="1" oninput="updateZoom(this.value)">
                           <div id="zoom-res" style="color:#66fcf1; font-weight:bold">0.1...</div>
                       </div>`
            },
            {
                type: 'info', planet: 'üöÄ', color: '#45a29e',
                title: '4Ô∏è‚É£ –¢–µ–æ—Ä–∏–∏ –∏ –ü–∞—Ä–∞–¥–æ–∫—Å—ã',
                text: `<h3>üè® –ü–∞—Ä–∞–¥–æ–∫—Å –æ—Ç–µ–ª—è –ì–∏–ª—å–±–µ—Ä—Ç–∞</h3>
                       <p>–û—Ç–µ–ª—å –ø–æ–ª–æ–Ω, –Ω–æ –≥–æ—Å—Ç—å –≤–ª–µ–∑–∞–µ—Ç, –µ—Å–ª–∏ –≤—Å–µ —Å–¥–≤–∏–Ω—É—Ç—Å—è (1‚Üí2, 2‚Üí3...).</p>
                       <div class="hotel-container">
                           <div class="hotel" id="hotel-track">
                               <div class="room"><span class="room-num">1</span><span class="guest">üê±</span></div>
                               <div class="room"><span class="room-num">2</span><span class="guest">üê∂</span></div>
                               <div class="room"><span class="room-num">3</span><span class="guest">ü¶ä</span></div>
                               <div class="room"><span class="room-num">4</span><span class="guest">üêº</span></div>
                           </div>
                       </div>
                       <button class="interactive-btn" onclick="addGuest()">–ó–∞—Å–µ–ª–∏—Ç—å!</button>
                       
                       <h3>üê¢ –ê—Ö–∏–ª–ª–µ—Å –∏ —á–µ—Ä–µ–ø–∞—Ö–∞</h3>
                       <p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏. –ê—Ö–∏–ª–ª–µ—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–≥–æ–Ω–∏—Ç —á–µ—Ä–µ–ø–∞—Ö—É –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ö–æ—Ç—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –¥–æ–≥–æ–Ω–∏—Ç.</p>
                       <div style="background:#1f2833; height:40px; border-radius:20px; position:relative; margin:10px 0; border:1px solid #45a29e">
                           <span id="ach" style="position:absolute; left:0; top:5px; transition:0.5s">üèÉ</span>
                           <span id="tur" style="position:absolute; left:50%; top:5px; transition:0.5s">üê¢</span>
                       </div>
                       <button class="interactive-btn" onclick="stepAchilles()">–°–æ–∫—Ä–∞—Ç–∏—Ç—å –ø—É—Ç—å –≤–¥–≤–æ–µ</button>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#ffb74d',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 3: –û—Ç–µ–ª—å',
                text: `<p>–ú–æ–∂–µ—Ç –ª–∏ –ø–æ–ª–Ω—ã–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –æ—Ç–µ–ª—å –ø—Ä–∏–Ω—è—Ç—å –≥–æ—Å—Ç—è?</p>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–ù–µ—Ç</button>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–î–∞</button>`
            },
            {
                type: 'info', planet: 'üõ∞Ô∏è', color: '#66fcf1',
                title: '5Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ',
                text: `<h3>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ IT</h3><p>–¢–µ–æ—Ä–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤, –ø—Ä–µ–¥–µ–ª—ã, –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã, –∞–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–π.</p>
                       <h3>–§–∏–∑–∏–∫–∞ –∏ –ö–æ—Å–º–æ—Å</h3><p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –≤ —á–µ—Ä–Ω—ã—Ö –¥—ã—Ä–∞—Ö (—Å–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å), –≤–æ–∑–º–æ–∂–Ω–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –í—Å–µ–ª–µ–Ω–Ω–∞—è.</p>
                       <div class="sim-box" style="border-color:#66fcf1">
                           <p><b>–°–∂–∞—Ç–∏–µ –∑–≤–µ–∑–¥—ã:</b></p>
                           <input type="range" min="1" max="100" value="1" oninput="updateDensity(this.value)">
                           <div id="density" style="color:#66fcf1; font-weight:bold">1000 —Ç/—Å–º¬≥</div>
                       </div>`
            },
            {
                type: 'quiz', planet: '‚ùì', color: '#45a29e',
                title: '‚ùì –í–æ–ø—Ä–æ—Å 4: –ì–¥–µ ‚àû –ø–ª–æ—Ç–Ω–æ—Å—Ç—å?',
                text: `<p>–ì–¥–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞?</p>
                       <button class="quiz-btn" data-correct="true" onclick="checkAnswer(this, true)">–í —á—ë—Ä–Ω—ã—Ö –¥—ã—Ä–∞—Ö</button>
                       <button class="quiz-btn" onclick="checkAnswer(this, false)">–í –°–æ–ª–Ω—Ü–µ</button>`
            },
            {
                type: 'info', planet: 'üìö', color: '#45a29e',
                title: '6Ô∏è‚É£ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ',
                text: `<p><b>–í —à–∫–æ–ª–µ:</b> —á–∏—Å–ª–∞, –ø—Ä—è–º—ã–µ, –¥—Ä–æ–±–∏, 
                       <span class="hover-term" data-desc="–ß–∏—Å–ª–æ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç—Ä–µ–º–∏—Ç—Å—è.<br>–ü—Ä–∏–º–µ—Ä: 2.9, 2.99 -> 3">–ø—Ä–µ–¥–µ–ª—ã</span>.</p>
                       <h3>üèÅ –ò—Ç–æ–≥</h3>
                       <p>–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ "–æ—á–µ–Ω—å –º–Ω–æ–≥–æ". –≠—Ç–æ –∏–¥–µ—è, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω—è–µ—Ç –Ω–∞—à–µ –º—ã—à–ª–µ–Ω–∏–µ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –í—Å–µ–ª–µ–Ω–Ω–æ–π.</p>`
            }
        ];

        // --- –ö–ê–ù–í–ê–° ---
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        const starCount = isMobile ? 150 : 500;
        const stars = [];
        for (let i = 0; i < starCount; i++) stars.push({ x: Math.random() * width, y: Math.random() * height, z: Math.random() * 2 + 0.5 });

        let speedMultiplier = 1;
        let cosmicStopped = false;

        function drawStars() {
            ctx.fillStyle = '#0b0c10'; ctx.fillRect(0, 0, width, height); ctx.fillStyle = '#c5c6c7';
            for (let star of stars) {
                ctx.beginPath(); 
                ctx.arc(star.x, star.y, isMobile ? star.z * 0.7 : star.z, 0, Math.PI * 2); 
                ctx.fill();
                if (!cosmicStopped) { star.y += star.z * speedMultiplier; if (star.y > height) star.y = 0; }
            }
            requestAnimationFrame(drawStars);
        }
        drawStars();
        window.addEventListener('resize', () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; });

        // --- –õ–û–ì–ò–ö–ê ---
        let state = -1;
        let isMoving = false;
        let quizActive = false;
        const panel = document.getElementById('info-panel');
        const prompt = document.getElementById('space-prompt');
        const cosmicObject = document.getElementById('cosmic-object');
        const tooltip = document.getElementById('global-tooltip');

        function setPlanet(emoji, color) {
            cosmicObject.innerHTML = `<svg viewBox="0 0 100 100" style="${isMobile ? '' : `filter: drop-shadow(0 0 40px ${color});`}"><circle cx="50" cy="50" r="48" fill="${color}" fill-opacity="0.2" stroke="${color}" stroke-width="2"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" font-size="60">${emoji}</text></svg>`;
        }

        document.addEventListener('click', (e) => {
            if (e.target.closest('button') || e.target.closest('input') || e.target.closest('.hover-name') || e.target.closest('.hover-term')) return;
            tryAdvance();
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') { e.preventDefault(); tryAdvance(); }
        });

        function tryAdvance() {
            if (!isMoving && !quizActive && state === -1) advance();
            else if (!isMoving && !quizActive && content[state].type !== 'quiz') advance();
        }

        prompt.style.display = 'block';

        function advance() {
            isMoving = true;
            panel.classList.remove('visible');
            prompt.style.display = 'none';
            speedMultiplier = isMobile ? 10 : 20;
            state++;
            if (state >= content.length) { finalAnimation(); return; }

            cosmicObject.style.top = '120vh'; 
            quizActive = content[state].type === 'quiz';

            setTimeout(() => {
                setPlanet(content[state].planet, content[state].color);
                cosmicObject.style.transition = 'none';
                cosmicObject.style.top = '-300px';

                setTimeout(() => {
                    cosmicObject.style.transition = 'top 2.5s cubic-bezier(0.25, 1, 0.5, 1)';
                    cosmicObject.style.top = '20%';

                    setTimeout(() => {
                        speedMultiplier = 1; 
                        document.getElementById('info-title').innerText = content[state].title;
                        document.getElementById('info-text').innerHTML = content[state].text;
                        setupTooltips(); 
                        panel.classList.add('visible');
                        if (!quizActive) prompt.style.display = 'block';
                        isMoving = false;
                        if (content[state].title.includes("–ü–∞—Ä–∞–¥–æ–∫—Å—ã")) resetAchilles();
                    }, 2000);
                }, 100);
            }, 1000);
        }

        // --- –£–ú–ù–´–ï –¢–£–õ–¢–ò–ü–´ ---
        function setupTooltips() {
            document.querySelectorAll('.hover-name, .hover-term').forEach(el => {
                el.addEventListener('mouseenter', showTooltip);
                el.addEventListener('mouseleave', hideTooltip);
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö - —Ç–∞–ø —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∫–ª–∏–∫
                el.addEventListener('touchstart', (e) => {
                    e.stopPropagation();
                    if (tooltip.dataset.active === el.innerText) hideTooltip();
                    else { showTooltip(e); tooltip.dataset.active = el.innerText; }
                });
            });
        }

        function showTooltip(e) {
            const el = e.target;
            const imgFile = el.getAttribute('data-img');
            const years = el.getAttribute('data-years');
            const desc = el.getAttribute('data-desc');
            const rect = el.getBoundingClientRect();
            
            const imgEl = document.getElementById('tooltip-img');
            const textEl = document.getElementById('tooltip-text');

            if (imgFile) {
                // –ò—â–µ–º –≤ –ø–∞–ø–∫–µ images
                imgEl.src = 'images/' + imgFile;
                imgEl.onload = () => { imgEl.style.display = 'block'; }
                imgEl.onerror = () => { imgEl.style.display = 'none'; } // –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ç–æ, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∏—Ç–æ–µ
                textEl.innerHTML = `<span class="tooltip-years">${years}</span>`;
            } else {
                imgEl.style.display = 'none';
                textEl.innerHTML = desc;
            }

            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            const tooltipWidth = 240;
            let leftPos = rect.left + rect.width / 2 - tooltipWidth / 2;
            
            // –ó–∞—â–∏—Ç–∞ –æ—Ç –≤—ã—Ö–æ–¥–∞ –∑–∞ —ç–∫—Ä–∞–Ω
            if (leftPos < 10) leftPos = 10;
            if (leftPos + tooltipWidth > window.innerWidth) leftPos = window.innerWidth - tooltipWidth - 10;

            let topPos = rect.top - 20; 
            // –ï—Å–ª–∏ —Å–≤–µ—Ä—Ö—É –º–∞–ª–æ –º–µ—Å—Ç–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–Ω–∏–∑—É
            if (topPos < 200) topPos = rect.bottom + 10;
            else topPos -= (imgFile ? 200 : 80);

            // –ù–∞ –º–æ–±–∏–ª–∫–∞—Ö –≤—Å–µ–≥–¥–∞ —Å–Ω–∏–∑—É
            if (isMobile) {
                tooltip.style.top = 'auto';
                tooltip.style.bottom = '10px';
                tooltip.style.left = '5%';
                tooltip.style.width = '90%';
            } else {
                tooltip.style.top = topPos + 'px';
                tooltip.style.left = leftPos + 'px';
                tooltip.style.width = tooltipWidth + 'px';
                tooltip.style.bottom = 'auto';
            }
            
            tooltip.classList.add('active');
        }

        function hideTooltip() {
            tooltip.classList.remove('active');
            tooltip.dataset.active = "";
        }
        
        document.addEventListener('touchstart', (e) => {
            if(!e.target.closest('.hover-name') && !e.target.closest('.hover-term')) hideTooltip();
        });

        // --- –ò–ù–¢–ï–†–ê–ö–¢–ò–í ---
        window.checkAnswer = function(btn, isCorrect) {
            const allBtns = btn.parentElement.querySelectorAll('.quiz-btn');
            allBtns.forEach(b => b.disabled = true);
            if (isCorrect) { btn.classList.add('correct'); btn.innerText += " ‚úÖ"; } 
            else { btn.classList.add('wrong'); btn.innerText += " ‚ùå"; allBtns.forEach(b => { if(b.dataset.correct === "true") b.classList.add('correct'); }); }
            setTimeout(() => { quizActive = false; advance(); }, 1500);
        };
        let potCount = 0;
        window.addPotential = function() { potCount++; document.getElementById('pot-count').innerText = potCount; }
        window.updateZoom = function(val) { document.getElementById('zoom-res').innerText = '0.' + '0'.repeat(val) + '1...'; }
        window.updateDensity = function(val) { document.getElementById('density').innerText = val === '100' ? '–ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨ ‚àû' : val * 1000 + ' —Ç/—Å–º¬≥'; }
        
        const newGuests = ['üëΩ', 'ü§ñ', 'üëª', 'ü¶Ñ'];
        let guestIndex = 0;
        window.addGuest = function() {
            const track = document.getElementById('hotel-track');
            track.style.transform = 'translateX(70px)';
            setTimeout(() => {
                track.style.transition = 'none'; track.style.transform = 'translateX(0)';
                track.insertAdjacentHTML('afterbegin', `<div class="room"><span class="room-num">1</span><span class="guest">${newGuests[guestIndex++ % 4]}</span></div>`);
                if (track.children.length > 4) track.removeChild(track.children[4]);
                Array.from(track.children).forEach((room, idx) => room.querySelector('.room-num').innerText = idx + 1);
                setTimeout(() => track.style.transition = 'transform 0.5s ease', 50);
            }, 500);
        };
        let achPos = 0, turPos = 50;
        function resetAchilles() { achPos = 0; turPos = 50; }
        window.stepAchilles = function() {
            achPos = achPos + (turPos - achPos) / 2; turPos += 5;
            document.getElementById('ach').style.left = achPos + '%'; document.getElementById('tur').style.left = turPos + '%';
        };

        // --- –§–ò–ù–ê–õ ---
        function finalAnimation() {
            prompt.style.display = 'none';
            cosmicObject.style.display = 'none';
            speedMultiplier = isMobile ? 15 : 25; 

            setTimeout(() => {
                let slowDownInterval = setInterval(() => {
                    if(speedMultiplier > 2) speedMultiplier -= 0.5;
                    else clearInterval(slowDownInterval);
                }, 50);

                const bh = document.getElementById('black-hole');
                bh.style.display = 'block'; 
                bh.style.transition = 'top 4s ease-out, transform 4s ease-out';
                setTimeout(() => bh.classList.add('active'), 100); 

                setTimeout(() => {
                    speedMultiplier = 40; 
                    cosmicStopped = false; 
                    document.getElementById('ship').style.transition = 'all 2.5s ease-in';
                    document.getElementById('ship').style.bottom = '50%';
                    document.getElementById('ship').style.transform = 'translate(-50%, 50%) rotate(720deg) scale(0)';
                    document.getElementById('ship').style.filter = 'brightness(0)';

                    setTimeout(() => {
                        cosmicStopped = true; 
                        document.getElementById('credits').style.opacity = '1';
                        setTimeout(() => {
                            document.getElementById('credits').style.opacity = '0';
                            document.getElementById('ship').style.transition = 'all 2s ease-out';
                            document.getElementById('ship').style.bottom = '15%';
                            document.getElementById('ship').style.transform = 'translate(-50%, 0) rotate(0deg) scale(1)';
                            document.getElementById('ship').style.filter = isMobile ? 'none' : 'drop-shadow(0 0 15px rgba(102, 252, 241, 0.4))';
                            setTimeout(() => {
                                bh.classList.remove('active');
                                setTimeout(() => { bh.style.display = 'none'; bh.style.top = '-600px'; }, 3000);
                                cosmicStopped = false; speedMultiplier = 1; state = -1; isMoving = false;
                                prompt.innerText = "–ù–ê–ñ–ú–ò–¢–ï ‚Äî –ù–ê–ß–ê–¢–¨"; prompt.style.display = 'block';
                            }, 1000);
                        }, 6000);
                    }, 2500);
                }, 3000);
            }, 2500);
        }
    </script>
</body>
</html>
